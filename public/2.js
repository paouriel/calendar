(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{146:function(e,t,a){"use strict";a.r(t);var n=a(30),r=a.n(n);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return t?a[e].substr(0,t):a[e]}function o(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}function l(e){var t=e.response.data;return t.message+"<br><ul>"+(t.errors?Object.values(t.errors).map((function(e){return"<li>"+e[0]+"</li>"})).join("")+"</ul>":"")}var c={name:"BaseCalendar",props:["events"],data:function(){return{focus:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},selectedEvent:{},selectedElement:null,selectedOpen:!1,mode:"stack",modes:["stack","column"],weekday:[0,1,2,3,4,5,6],weekdays:[{text:"Sun - Sat",value:[0,1,2,3,4,5,6]},{text:"Mon - Sun",value:[1,2,3,4,5,6,0]},{text:"Mon - Fri",value:[1,2,3,4,5]},{text:"Mon, Wed, Fri",value:[1,3,5]}],value:new Date,dateOptions:{year:"numeric",month:"long",day:"numeric"}}},mounted:function(){this.refreshCalendar()},computed:{getCalendarLabel:function(){var e=new Date;return o(e.getMonth())+" "+e.getFullYear()}},methods:{viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},setToday:function(){this.focus="",this.type="month",this.value=new Date},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this,a=e.nativeEvent,n=e.event,r=function(){t.selectedEvent=n,t.selectedElement=a.target,setTimeout((function(){return t.selectedOpen=!0}),10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(r,10)):r(),a.stopPropagation()},showEventDetails:function(e){return e.name+"<br>Schedule: "+e.start+" - "+e.end},getEventColor:function(e){return e.color},getFullDate:function(e){return function(e){return o(e.getMonth())+" "+e.getDate()+", "+e.getFullYear()}(new Date(e))},refreshCalendar:function(){this.$refs.calendar.checkChange()}}},i=a(19),d=a(20),u=a.n(d),v=a(53),m=a(194),p=a(49),h=a(22),f=a(187),b=a(50),g=a(51),_=a(40),k=a(43),y=a(195),w=a(16),x=a(188),D=a(52),C=a(31),E=Object(i.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pa-5"},[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("\n                Today\n            ")]),e._v(" "),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),e._v(" "),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),e._v(" "),a("v-toolbar-title",[e.$refs.calendar?a("span",[e._v(e._s(e.$refs.calendar.title))]):a("span",[e._v(e._s(e.getCalendarLabel))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),n),[a("span",[e._v(e._s(e.typeToLabel[e.type]))]),e._v(" "),a("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}])},[e._v(" "),a("v-list",[a("v-list-item",{on:{click:function(t){e.type="day"}}},[a("v-list-item-title",[e._v("Day")])],1),e._v(" "),a("v-list-item",{on:{click:function(t){e.type="week"}}},[a("v-list-item-title",[e._v("Week")])],1),e._v(" "),a("v-list-item",{on:{click:function(t){e.type="month"}}},[a("v-list-item-title",[e._v("Month")])],1),e._v(" "),a("v-list-item",{on:{click:function(t){e.type="4day"}}},[a("v-list-item-title",[e._v("4 days")])],1)],1)],1)],1)],1),e._v(" "),a("v-sheet",{attrs:{height:"500"}},[a("v-calendar",{ref:"calendar",attrs:{weekdays:e.weekday,type:e.type,events:e.events,"event-overlap-mode":e.mode,"event-overlap-threshold":30,"event-color":e.getEventColor},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),a("v-menu",{attrs:{"close-on-content-click":!0,activator:e.selectedElement,"offset-y":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-toolbar-title",{domProps:{innerHTML:e._s(e.selectedEvent.name)}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-heart")])],1)],1),e._v(" "),a("v-card-text",{staticClass:"text-left"},[a("div",{staticClass:"event-name"},[a("v-chip",{staticClass:"ma-2",attrs:{color:e.selectedEvent.color,label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-label")]),e._v("Event Name:\n                        ")],1),e._v(" "),a("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.selectedEvent.name))])],1),e._v(" "),a("div",{staticClass:"schedule"},[a("v-chip",{staticClass:"ma-2",attrs:{color:e.selectedEvent.color,label:"","text-color":"white"}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-clock")]),e._v("Schedule:\n                        ")],1),e._v(" "),e.selectedEvent.start===e.selectedEvent.end?a("span",{staticClass:"font-weight-bold"},[e._v("\n                            "+e._s(e.getFullDate(e.selectedEvent.start))+"\n                        ")]):a("span",{staticClass:"font-weight-bold"},[e._v("\n                            "+e._s(e.getFullDate(e.selectedEvent.start))+" - "+e._s(e.getFullDate(e.selectedEvent.end))+"\n                        ")])],1)]),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("\n                        Close\n                    ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null),V=E.exports;u()(E,{VBtn:v.a,VCalendar:m.a,VCard:p.a,VCardActions:h.a,VCardText:h.b,VChip:f.a,VIcon:b.a,VList:g.a,VListItem:_.a,VListItemTitle:k.a,VMenu:y.a,VSheet:w.a,VSpacer:x.a,VToolbar:D.a,VToolbarTitle:C.a});var T={name:"BaseDateRangePicker",props:["value","label"],data:function(){return{modal:!1,date:""}},methods:{update:function(){this.$emit("update:value",this.date)}}},S=a(193),M=a(196),L=Object(i.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:e.label,"prepend-icon":"mdi-calendar",readonly:"",clearable:""},on:{input:e.update},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",r,!1),n))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[e._v(" "),a("v-date-picker",{attrs:{scrollable:""},on:{input:function(t){e.modal=!1},change:e.update},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)}),[],!1,null,null,null),O=L.exports;u()(L,{VDatePicker:S.a,VMenu:y.a,VTextField:M.a});var $={name:"BaseCheckboxGroup",props:["value","objects"],data:function(){return{items:this.value}},methods:{update:function(){this.$emit("update:value",this.items)}}},F=a(197),A=a(189),j=a(190),P=Object(i.a)($,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("span",{staticClass:"text-body-1"},[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-white-balance-sunny")]),e._v("Occurring days\n        ")],1)]),e._v(" "),e._l(e.objects,(function(t,n){return a("v-col",{key:n,staticClass:"py-0",attrs:{cols:"4"}},[a("v-checkbox",{attrs:{label:t.label,value:t.value,dense:""},on:{change:e.update},model:{value:e.items,callback:function(t){e.items=t},expression:"items"}})],1)}))],2)}),[],!1,null,null,null),B=P.exports;function N(e,t,a,n,r,s,o){try{var l=e[s](o),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function R(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){N(s,n,r,o,l,"next",e)}function l(e){N(s,n,r,o,l,"throw",e)}o(void 0)}))}}u()(P,{VCheckbox:F.a,VCol:A.a,VIcon:b.a,VRow:j.a});var J={name:"CalendarPage",components:{BaseCalendar:V,BaseDatePicker:O,BaseCheckboxGroup:B},data:function(){return{loading:!0,formLoading:!1,transition:"fade-transition",data:{event_name:"",start_date:"",end_date:"",occurring_days:[]},days:[{label:"Mon",value:"Mo"},{label:"Tue",value:"Tu"},{label:"Wed",value:"We"},{label:"Thu",value:"Th"},{label:"Fri",value:"Fr"},{label:"Sat",value:"Sa"},{label:"Sun",value:"Su"}],events:[],snackbar:{success:!1,error:!1,message:"",timeout:3e3}}},mounted:function(){var e=this;return R(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEvents();case 2:case"end":return t.stop()}}),t)})))()},computed:{validateData:function(){return Object.values(this.data).every((function(e){return Array.isArray(e)?e.length:e}))}},methods:{addEvent:function(){var e=this;this.formLoading=!0,this.data.occurring_days=JSON.stringify(this.data.occurring_days),axios.post("calendar-events",this.data).then(function(){var t=R(r.a.mark((function t(a){var n,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formLoading=!1,n=a.data,s=n.data,e.splitEventDates([s]),e.$refs["base-calendar"].refreshCalendar(),e.showAlert({success:!0,message:n.message});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.showAlert({success:!1,message:l(t)})}))},getEvents:function(){var e=this;return R(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("calendar-events").then((function(t){var a=t.data.data;e.splitEventDates(a)})).catch((function(t){e.showAlert({success:!1,message:l(t)})}));case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},splitEventDates:function(e){var t,a=this,n=[],r=["blue","indigo","deep-purple","cyan","green","orange","grey darken-1","teal","light-blue","light-green","lime","yellow darken-2","amber","deep-orange","brown","blue-grey"];e.forEach((function(e){var t,o,l,c=r[(t=0,o=r.length-1,Math.floor((o-t+1)*Math.random())+t)],i=e.event_name,d=new Date(e.start_date),u=new Date(e.end_date),v=e.occurring_days,m=[],p=new Date(d);do{v.includes(s(p.getDay(),2))&&m.push(new Date((l=p).getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate()));var h=p.setDate(p.getDate()+1);p=new Date(h)}while(p<=u);var f=0;m.forEach((function(e,t){if(0===f)d=e,f++;else{var r=new Date(d);r.setDate(r.getDate()+f),r.toLocaleDateString()===e.toLocaleDateString()?t<m.length-1?f++:a.addNewDateRange(n,i,d,e,c):(a.addNewDateRange(n,i,d,m[t-1],c),f=1,d=e,t===m.length-1&&a.addNewDateRange(n,i,e,e,c))}}))})),(t=this.events).push.apply(t,n)},addNewDateRange:function(e,t,a,n,r){e.push({name:t,start:a,end:n,color:r})},showAlert:function(e){e.success?(this.snackbar.success=!0,this.snackbar.message=e.message):(this.snackbar.error=!0,this.snackbar.message=e.message),this.loading=!1,this.formLoading=!1}}},W=a(191),I=a(192),H=Object(i.a)(J,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"ma-5"},[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Add an Event!")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-heart")])],1)],1),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"Event Name","prepend-icon":"mdi-tag",clearable:""},model:{value:e.data.event_name,callback:function(t){e.$set(e.data,"event_name",t)},expression:"data.event_name"}}),e._v(" "),a("base-date-picker",{attrs:{value:e.data.start_date,label:"Start date"},on:{"update:value":function(t){return e.$set(e.data,"start_date",t)}}}),e._v(" "),a("base-date-picker",{attrs:{value:e.data.end_date,label:"End date"},on:{"update:value":function(t){return e.$set(e.data,"end_date",t)}}}),e._v(" "),a("base-checkbox-group",{attrs:{value:e.data.occurring_days,objects:e.days},on:{"update:value":function(t){return e.$set(e.data,"occurring_days",t)}}})],1),e._v(" "),a("v-btn",{attrs:{disabled:!e.validateData||e.formLoading,loading:e.formLoading,color:"primary",block:"",tile:"",depressed:""},on:{click:e.addEvent}},[a("span",[e._v("Add")])])],1)],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-card",{staticClass:"pa-5"},[a("v-skeleton-loader",{ref:"skeleton",attrs:{loading:e.loading,transition:e.transition,type:"date-picker"}},[a("base-calendar",{ref:"base-calendar",attrs:{events:e.events}})],1)],1)],1),e._v(" "),a("v-snackbar",{attrs:{color:"success",timeout:e.snackbar.timeout},model:{value:e.snackbar.success,callback:function(t){e.$set(e.snackbar,"success",t)},expression:"snackbar.success"}},[a("span",{domProps:{innerHTML:e._s(e.snackbar.message)}})]),e._v(" "),a("v-snackbar",{attrs:{color:"error",timeout:e.snackbar.timeout},model:{value:e.snackbar.error,callback:function(t){e.$set(e.snackbar,"error",t)},expression:"snackbar.error"}},[a("span",{domProps:{innerHTML:e._s(e.snackbar.message)}})])],1)}),[],!1,null,null,null);t.default=H.exports;u()(H,{VBtn:v.a,VCard:p.a,VCardText:h.b,VCol:A.a,VIcon:b.a,VRow:j.a,VSkeletonLoader:W.a,VSnackbar:I.a,VSpacer:x.a,VTextField:M.a,VToolbar:D.a,VToolbarTitle:C.a})}}]);